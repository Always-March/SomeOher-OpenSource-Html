public void genpic(OutputStream os,String data) throws IOException
	{	
		
		    int width = 50;
		    int height = 20;
		    BufferedImage bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
 	         Graphics2D g2d = bufferedImage.createGraphics();
		    g2d.setColor(Color.white);
		    g2d.fillRect(0, 0, width, height);
		    g2d.setColor(Color.red);
		   // g2d.drawString("1234", 1, 10);
		    g2d.drawString(data, 1, 10);
		    g2d.dispose();
		    RenderedImage rendImage = bufferedImage;
		    
		    ByteArrayOutputStream bio=new ByteArrayOutputStream();
		    ImageIO.write(rendImage, "png", bio);	     
		     
		    System.out.println( new String(bio.toByteArray()));
		    
		    os.write(bio.toByteArray());
		    os.flush();
		  
	}
	
	public void doGet(HttpServletRequest req,HttpServletResponse resp) throws IOException
	{
		String data="";//²úÉú4Î»Êý
		//int idata=(int)Math.round(Math.random()*40+60);//60-100
		//1000  9999
		int idata=(int)Math.round(Math.random()*8999+100);
		data=data+idata;
		genpic(resp.getOutputStream(),data);
	}
yangjiaqi 
dingzhiqia
